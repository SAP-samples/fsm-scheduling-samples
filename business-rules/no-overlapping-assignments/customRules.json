[
  {
    "actions": [
      {
        "executionCount": "1",
        "name": "Validate",
        "parameters": {
          "constraints": [
            {
              "name": "Action not allowed - activity is overlapping other released activity. Context activity subject:[${activity.subject}] (id=${activity.id})",
              "value": "${overlapping_sa.length === 0}"
            }
          ]
        }
      }
    ],
    "code": "VALIDATION_RULE_NO_OVERLAPPING_ASSIGNMENTS",
    "conditions": [],
    "description": "Don't allow overlapping assignments for released activities",
    "embedded": false,
    "enabled": true,
    "eventType": "CREATE_OR_UPDATE",
    "executionType": "ON_VALIDATION",
    "lastChanged": 1608205131050,
    "name": "VALIDATION_RULE_NO_OVERLAPPING_ASSIGNMENTS",
    "objectType": "SERVICEASSIGNMENT",
    "permissionsType": "USER",
    "responsible": "s.gausmann@sap.com",
    "type": "TWO",
    "variables": [
      {
        "name": "overlapping_sa",
        "dtoVersions": "ServiceAssignment.28",
        "query": "select overlap.id from ServiceAssignment overlap WHERE overlap.id != ${serviceAssignment.id} AND overlap.released = true AND overlap.technician = ${serviceAssignment.technician} AND ((overlap.startDateTime >= ${serviceAssignment.startDateTime} AND overlap.endDateTime <= ${serviceAssignment.endDateTime}) \tOR (overlap.startDateTime < ${serviceAssignment.startDateTime} AND overlap.endDateTime > ${serviceAssignment.startDateTime}) OR (overlap.startDateTime < ${serviceAssignment.endDateTime} AND overlap.endDateTime > ${serviceAssignment.endDateTime})) limit 20"
      },
      {
        "name": "activity",
        "type": "Activity",
        "value": "${serviceAssignment.activity} = activity.id",
        "variableType": "OBJECT",
        "version": 37
      }
    ]
  }
]